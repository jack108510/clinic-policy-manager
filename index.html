<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSI Policy Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-shield-alt"></i>
                <span>CSI Policy Manager</span>
            </div>
            <div class="nav-menu">
                <a href="#home" class="nav-link">Home</a>
                <a href="#policies" class="nav-link">All Policies</a>
                <div class="dropdown">
                    <a href="#" class="nav-link dropdown-toggle">Policy Types <i class="fas fa-chevron-down"></i></a>
                    <div class="dropdown-content">
                        <a href="#admin">Admin Policies</a>
                        <a href="#sog">Standard Operating Guidelines</a>
                        <a href="#memos">Communication Memos</a>
                    </div>
                </div>
                <a href="#" onclick="showLoginModal()" class="nav-link">Login</a>
                <a href="#" onclick="showSignupModal()" class="nav-link">Sign Up</a>
                <a href="#" onclick="openPasswordModal()" class="nav-link">Admin Dashboard</a>
                <a href="#" onclick="showProfileModal()" class="nav-link">Profile Center</a>
                <a href="admin-master/index.html" class="nav-link master-admin-link">Master Admin</a>
            </div>
            <div class="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>CSI Policy Manager</h1>
            <p>Secure, organized, and compliant policy management for healthcare facilities</p>
            <div class="hero-buttons">
                <a href="#policies" class="btn btn-primary">View All Policies</a>
                <a href="#" onclick="openPasswordModal()" class="btn btn-secondary">Admin Dashboard</a>
            </div>
        </div>
    </section>

    <!-- Policy Types Section -->
    <section class="policy-types">
        <div class="container">
            <h2>Policy Categories</h2>
            <div class="policy-grid">
                <div class="policy-card" data-type="admin">
                    <div class="policy-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3>Admin Policies</h3>
                    <p>Administrative procedures and governance policies</p>
                    <a href="#admin" class="btn btn-outline">View Admin Policies</a>
                </div>
                <div class="policy-card" data-type="sog">
                    <div class="policy-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h3>Standard Operating Guidelines</h3>
                    <p>Operational procedures and clinical guidelines</p>
                    <a href="#sog" class="btn btn-outline">View SOG</a>
                </div>
                <div class="policy-card" data-type="memos">
                    <div class="policy-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Communication Memos</h3>
                    <p>Internal communications and announcements</p>
                    <a href="#memos" class="btn btn-outline">View Memos</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Clinics Section -->
    <section class="clinics">
        <div class="container">
            <h2>Our Clinic Locations</h2>
            <div class="clinic-grid">
                <div class="clinic-card">
                    <i class="fas fa-hospital"></i>
                    <h3>Tudor Glen</h3>
                    <p>Primary clinic location</p>
                </div>
                <div class="clinic-card">
                    <i class="fas fa-hospital"></i>
                    <h3>River Valley</h3>
                    <p>Secondary clinic location</p>
                </div>
                <div class="clinic-card">
                    <i class="fas fa-hospital"></i>
                    <h3>Rosslyn</h3>
                    <p>Extended services location</p>
                </div>
                <div class="clinic-card">
                    <i class="fas fa-hospital"></i>
                    <h3>UPC</h3>
                    <p>University partnership clinic</p>
                </div>
            </div>
        </div>
    </section>

    <!-- All Policies Section -->
    <section id="policies" class="policies">
        <div class="container">
            <h2>All Policies</h2>
            <div class="search-bar">
                <input type="text" id="policySearch" placeholder="Search policies...">
                <i class="fas fa-search"></i>
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All Policies</button>
                <button class="filter-btn" data-filter="admin">Admin</button>
                <button class="filter-btn" data-filter="sog">Standard Operating Guidelines</button>
                <button class="filter-btn" data-filter="memos">Communication Memos</button>
            </div>
            <div class="policies-grid" id="policiesGrid">
                <!-- Policies will be loaded here -->
            </div>
        </div>
    </section>


    <!-- Create Policy Modal -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Policy</h3>
                <span class="close" onclick="closeCreateModal()">&times;</span>
            </div>
            <form id="policyForm" class="modal-body">
                <div class="form-group">
                    <label for="policyTitle">Policy Title</label>
                    <input type="text" id="policyTitle" required>
                </div>
                <div class="form-group">
                    <label for="policyType">Policy Type</label>
                    <select id="policyType" required onchange="updateManualFormFields()">
                        <option value="">Select Type</option>
                        <option value="admin">Admin Policy</option>
                        <option value="sog">Standard Operating Guidelines</option>
                        <option value="memo">Communication Memos</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clinicApplicability">Clinic Applicability</label>
                    <select id="clinicApplicability" multiple required>
                        <option value="tudor-glen">Tudor Glen</option>
                        <option value="river-valley">River Valley</option>
                        <option value="rosslyn">Rosslyn</option>
                        <option value="upc">UPC</option>
                    </select>
                </div>
                
                <!-- Dynamic form fields based on policy type -->
                <div id="dynamicManualFormFields">
                    <!-- Fields will be populated based on policy type selection -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Policy</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Password Protection Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-lock"></i> Admin Access</h2>
                <span class="close" onclick="closePasswordModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="password-form">
                    <div class="form-group">
                        <label for="adminPassword">Enter Admin Password:</label>
                        <input type="password" id="adminPassword" placeholder="Enter password..." required>
                        <div id="passwordError" class="error-message"></div>
                    </div>
                    <div class="form-actions">
                        <button onclick="checkAdminPassword()" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Access Admin
                        </button>
                        <button onclick="closePasswordModal()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <span class="close" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" onclick="showSettingsTab('roles')">
                        <i class="fas fa-users"></i> Roles & Responsibilities
                    </button>
                    <button class="tab-btn" onclick="showSettingsTab('disciplinary')">
                        <i class="fas fa-gavel"></i> Disciplinary Actions
                    </button>
                </div>
                
                <!-- Roles Tab -->
                <div id="rolesTab" class="settings-tab active">
                    <div class="settings-section">
                        <h3>Manage Roles & Responsibilities</h3>
                        <div class="add-item-form">
                            <input type="text" id="newRoleName" placeholder="Role name (e.g., Senior Veterinarian)">
                            <input type="text" id="newRoleDescription" placeholder="Role description">
                            <input type="text" id="newRoleStaffName" placeholder="Staff member name">
                            <input type="email" id="newRoleEmail" placeholder="Staff email">
                            <button onclick="addRole()" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Role
                            </button>
                        </div>
                        <div class="items-list" id="rolesList">
                            <!-- Roles will be displayed here -->
                        </div>
                    </div>
                </div>
                
                <!-- Disciplinary Actions Tab -->
                <div id="disciplinaryTab" class="settings-tab">
                    <div class="settings-section">
                        <h3>Manage Disciplinary Actions</h3>
                        <div class="add-item-form">
                            <input type="text" id="newActionName" placeholder="Action name (e.g., Verbal Warning)">
                            <input type="text" id="newActionDescription" placeholder="Action description">
                            <input type="text" id="newActionPenalties" placeholder="Penalties (e.g., Written warning, Performance review)">
                            <select id="newActionSeverity">
                                <option value="minor">Minor</option>
                                <option value="moderate">Moderate</option>
                                <option value="major">Major</option>
                                <option value="severe">Severe</option>
                            </select>
                            <button onclick="addDisciplinaryAction()" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Action
                            </button>
                        </div>
                        <div class="items-list" id="disciplinaryList">
                            <!-- Disciplinary actions will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- AI Policy Chat Modal -->
    <div id="aiModal" class="modal">
        <div class="modal-content chat-modal">
            <div class="modal-header">
                <h3><i class="fas fa-comments"></i> AI Policy Assistant</h3>
                <span class="close" onclick="closeAIModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message ai-message">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <p>Hello! I'm your AI Policy Assistant. I'll help you create a professional healthcare policy step by step.</p>
                                <p>Let's start with the basics. What type of policy would you like to create?</p>
                                <div class="quick-options">
                                    <button class="btn btn-sm btn-outline" onclick="selectPolicyType('admin')">Admin Policy</button>
                                    <button class="btn btn-sm btn-outline" onclick="selectPolicyType('sog')">Standard Operating Guidelines</button>
                                    <button class="btn btn-sm btn-outline" onclick="selectPolicyType('memo')">Communication Memo</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <div class="chat-input">
                            <input type="text" id="chatInput" placeholder="Type your message here..." onkeypress="handleChatKeyPress(event)">
                            <button onclick="sendChatMessage()" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="chat-actions">
                            <button onclick="resetChat()" class="btn btn-sm btn-secondary">
                                <i class="fas fa-refresh"></i> Start Over
                            </button>
                            <button onclick="generatePolicyFromChat()" class="btn btn-sm btn-success" id="generatePolicyBtn" style="display: none;">
                                <i class="fas fa-magic"></i> Generate Policy
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Loading and Result Sections -->
                <div id="aiSurveyForm" style="display: none;">
                    <div class="survey-step active" id="step1">
                        <h4>Step 1: Policy Overview</h4>
                        <div class="form-group">
                            <label for="aiPolicyTopic">What type of policy do you need?</label>
                            <input type="text" id="aiPolicyTopic" placeholder="e.g., Fire Evacuation, Hand Hygiene, Patient Safety, Data Security" required>
                        </div>
                        <div class="form-group">
                            <label for="aiPolicyType">What type of document is this?</label>
                            <select id="aiPolicyType" required>
                                <option value="">Select Type</option>
                                <option value="admin">Admin Policy (Official policy with compliance requirements)</option>
                                <option value="sog">Standard Operating Guidelines (Step-by-step procedures)</option>
                                <option value="memo">Communication Memo (Staff announcement/update)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="aiClinicApplicability">Which clinics does this apply to?</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="clinics" value="tudor-glen"> Tudor Glen</label>
                                <label><input type="checkbox" name="clinics" value="river-valley"> River Valley</label>
                                <label><input type="checkbox" name="clinics" value="rosslyn"> Rosslyn</label>
                                <label><input type="checkbox" name="clinics" value="upc"> UPC</label>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="nextStep(2)">Next</button>
                    </div>
                    
                    <div class="survey-step" id="step2">
                        <h4>Step 2: Policy Details</h4>
                        <div class="form-group">
                            <label for="aiSpecificNeeds">What specific needs or challenges does this policy address?</label>
                            <textarea id="aiSpecificNeeds" rows="3" placeholder="Describe the main issues, concerns, or goals this policy should address..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="aiUrgency">How urgent is this policy?</label>
                            <select id="aiUrgency">
                                <option value="immediate">Immediate (Need to implement right away)</option>
                                <option value="soon">Soon (Within the next month)</option>
                                <option value="planned">Planned (Part of regular policy updates)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="aiRegulations">Are there specific regulations or standards this must comply with?</label>
                            <textarea id="aiRegulations" rows="2" placeholder="e.g., OSHA, HIPAA, AAHA guidelines, local regulations..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="aiExistingPolicies">Are there existing policies this should reference or replace?</label>
                            <textarea id="aiExistingPolicies" rows="2" placeholder="List any current policies, procedures, or documents..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="aiSpecialConsiderations">Any special considerations or unique aspects?</label>
                            <textarea id="aiSpecialConsiderations" rows="2" placeholder="Any specific requirements, limitations, or considerations..."></textarea>
                        </div>
                        <button type="button" class="btn btn-secondary" onclick="prevStep(1)">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="generatePolicyFromSurvey()">Generate Policy</button>
                    </div>
                </div>
                
                <!-- Legacy form (hidden) -->
                <form id="aiForm" style="display: none;">
                    <div class="ai-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeAIModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-magic"></i> Generate Policy
                        </button>
                    </div>
                </form>
                <div id="aiLoading" class="ai-loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>AI is generating your policy...</p>
                </div>
                <div id="aiResult" class="ai-result" style="display: none;">
                    <h4>Generated Policy Preview</h4>
                    <div id="aiGeneratedContent"></div>
                    <div class="ai-result-actions">
                        <button class="btn btn-secondary" onclick="storeDraft()">Store Draft</button>
                        <button class="btn btn-outline" onclick="continueChat()">Continue Chat</button>
                        <button class="btn btn-secondary" onclick="editAIPolicy()">Edit Manually</button>
                        <button class="btn btn-success" onclick="exportPolicy('pdf')">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                        <button class="btn btn-info" onclick="exportPolicy('docx')">
                            <i class="fas fa-file-word"></i> Export Word
                        </button>
                        <button class="btn btn-primary" onclick="saveAIPolicy()">Save Final Policy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>User Signup</h3>
                <span class="close" onclick="closeSignupModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupUsername">Username:</label>
                        <input type="text" id="signupUsername" placeholder="Enter username" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email:</label>
                        <input type="email" id="signupEmail" placeholder="Enter email" required>
                    </div>
                    <div class="form-group">
                        <label for="signupAccessCode">Access Code:</label>
                        <input type="password" id="signupAccessCode" placeholder="Enter access code" required>
                    </div>
                    <div id="signup-error-message" class="error-message"></div>
                    <button type="submit" class="btn btn-primary">Sign Up</button>
                </form>
                <p class="login-help">Already have an account? <a href="#" onclick="closeSignupModal(); showLoginModal();">Login here</a></p>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>User Login</h3>
                <span class="close" onclick="closeLoginModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="loginUser(event)">
                    <div class="form-group">
                        <label for="loginUsername">Username:</label>
                        <input type="text" id="loginUsername" placeholder="Enter username" required>
                    </div>
                    <div class="form-group">
                        <label for="loginCompany">Company:</label>
                        <input type="text" id="loginCompany" placeholder="Enter company name" required>
                    </div>
                    <div id="login-error-message" class="error-message"></div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
                <p class="login-help">Don't have an account? <a href="#" onclick="closeLoginModal(); showSignupModal();">Create one now</a></p>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Admin Access</h3>
                <span class="close" onclick="closePasswordModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="passwordForm" onsubmit="checkAdminPassword(event)">
                    <div class="form-group">
                        <label for="adminPassword">Enter Admin Password:</label>
                        <input type="password" id="adminPassword" placeholder="Enter password" required>
                        <div id="error-message" class="error-message"></div>
                    </div>
                    <button type="submit" class="btn btn-primary">Access Admin</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content admin-modal-content">
            <div class="modal-header">
                <h3>Admin Dashboard</h3>
                <span class="close" onclick="closeAdminModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="admin-stats">
                    <div class="stat-card">
                        <i class="fas fa-file-alt"></i>
                        <h3 id="adminTotalPolicies">0</h3>
                        <p>Total Policies</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-edit"></i>
                        <h3 id="adminDraftCount">0</h3>
                        <p>Draft Policies</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <h3 id="adminUserCount">0</h3>
                        <p>Total Users</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-building"></i>
                        <h3 id="adminCompanyCount">0</h3>
                        <p>Companies</p>
                    </div>
                </div>
                
                <div class="admin-actions">
                    <button class="btn btn-primary" onclick="openCreateModal()">
                        <i class="fas fa-plus"></i> Create New Policy
                    </button>
                    <button class="btn btn-secondary" onclick="openAIModal()">
                        <i class="fas fa-robot"></i> AI Policy Generator
                    </button>
                    <button class="btn btn-info" onclick="openSettingsModal()">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
                
                <!-- Draft Management Section -->
                <div class="draft-management">
                    <h3>Draft Policies</h3>
                    <div id="adminDraftList" class="draft-list">
                        <!-- Drafts will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <span class="close" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" onclick="showSettingsTab('roles')">Roles & Responsibilities</button>
                    <button class="tab-btn" onclick="showSettingsTab('disciplinary')">Disciplinary Actions</button>
                    <button class="tab-btn" onclick="showSettingsTab('users')">User Management</button>
                    <button class="tab-btn" onclick="showSettingsTab('api')">API Configuration</button>
                </div>
                
                <!-- Roles Tab -->
                <div id="rolesTab" class="settings-tab active">
                    <div class="settings-section">
                        <h3>Manage Roles & Responsibilities</h3>
                        <div class="add-item-form">
                            <input type="text" id="newRoleName" placeholder="Role name (e.g., Senior Veterinarian)">
                            <input type="text" id="newRoleDescription" placeholder="Role description">
                            <input type="text" id="newRoleStaffName" placeholder="Staff member name">
                            <input type="email" id="newRoleEmail" placeholder="Staff email">
                            <button onclick="addRole()" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Role
                            </button>
                        </div>
                        <div class="items-list" id="rolesList">
                            <!-- Roles will be displayed here -->
                        </div>
                    </div>
                </div>
                
                <!-- Disciplinary Actions Tab -->
                <div id="disciplinaryTab" class="settings-tab">
                    <div class="settings-section">
                        <h3>Manage Disciplinary Actions</h3>
                        <div class="add-item-form">
                            <input type="text" id="newActionName" placeholder="Action name (e.g., Verbal Warning)">
                            <input type="text" id="newActionDescription" placeholder="Action description">
                            <input type="text" id="newActionPenalties" placeholder="Penalties (e.g., Written warning, Performance review)">
                            <select id="newActionSeverity">
                                <option value="minor">Minor</option>
                                <option value="moderate">Moderate</option>
                                <option value="major">Major</option>
                                <option value="severe">Severe</option>
                            </select>
                            <button onclick="addDisciplinaryAction()" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Action
                            </button>
                        </div>
                        <div class="items-list" id="disciplinaryList">
                            <!-- Disciplinary actions will be displayed here -->
                        </div>
                    </div>
                </div>
                
                <!-- User Management Tab -->
                <div id="usersTab" class="settings-tab">
                    <div class="settings-section">
                        <h3>User Management</h3>
                        <div class="add-item-form">
                            <input type="text" id="newUserName" placeholder="Username">
                            <input type="email" id="newUserEmail" placeholder="Email">
                            <input type="text" id="newUserCompany" placeholder="Company">
                            <select id="newUserRole">
                                <option value="user">User</option>
                                <option value="admin">Admin</option>
                            </select>
                            <button onclick="addUser()" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add User
                            </button>
                        </div>
                        <div class="items-list" id="usersList">
                            <!-- Users will be displayed here -->
                        </div>
                    </div>
                </div>
                
                <!-- API Configuration Tab -->
                <div id="apiTab" class="settings-tab">
                    <div class="settings-section">
                        <h3>ChatGPT API Configuration</h3>
                        <div class="api-config">
                            <div class="form-group">
                                <label for="apiKey">OpenAI API Key:</label>
                                <input type="password" id="apiKey" placeholder="Enter your OpenAI API key">
                                <small class="form-help">
                                    Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>
                                </small>
                            </div>
                            <div class="form-group">
                                <button onclick="saveAPIKey()" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Save API Key
                                </button>
                                <button onclick="testAPIKey()" class="btn btn-secondary">
                                    <i class="fas fa-test-tube"></i> Test Connection
                                </button>
                                <button onclick="clearAPIKey()" class="btn btn-danger">
                                    <i class="fas fa-trash"></i> Clear API Key
                                </button>
                            </div>
                            <div id="api-status" class="api-status">
                                <!-- API status will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Center Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content profile-modal-content">
            <div class="modal-header">
                <h3>Profile Center</h3>
                <span class="close" onclick="closeProfileModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-info">
                            <h3 id="profileUserName">Guest User</h3>
                            <p id="profileUserCompany">Not logged in</p>
                            <span class="profile-status" id="profileUserStatus">Inactive</span>
                        </div>
                    </div>
                </div>

                <div class="profile-tabs">
                    <button class="tab-btn active" onclick="showProfileTab('account')">Account Info</button>
                    <button class="tab-btn" onclick="showProfileTab('security')">Security</button>
                    <button class="tab-btn" onclick="showProfileTab('preferences')">Preferences</button>
                </div>

                <!-- Account Info Tab -->
                <div id="accountTab" class="profile-tab active">
                    <div class="profile-section">
                        <h4>Account Information</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Username</label>
                                <span id="profileUsername">guest</span>
                            </div>
                            <div class="info-item">
                                <label>Email</label>
                                <span id="profileEmail">guest@example.com</span>
                            </div>
                            <div class="info-item">
                                <label>Company</label>
                                <span id="profileCompany">Not assigned</span>
                            </div>
                            <div class="info-item">
                                <label>Role</label>
                                <span id="profileRole">Guest</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Tab -->
                <div id="securityTab" class="profile-tab">
                    <div class="profile-section">
                        <h4>Security Settings</h4>
                        <div class="security-options">
                            <button class="btn btn-primary" onclick="showChangePasswordModal()">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                            <button class="btn btn-secondary" onclick="showSessionInfo()">
                                <i class="fas fa-desktop"></i> Active Sessions
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preferences Tab -->
                <div id="preferencesTab" class="profile-tab">
                    <div class="profile-section">
                        <h4>User Preferences</h4>
                        <div class="preference-options">
                            <div class="preference-item">
                                <label>
                                    <input type="checkbox" checked>
                                    Email notifications for new policies
                                </label>
                            </div>
                            <div class="preference-item">
                                <label>
                                    <input type="checkbox" checked>
                                    Weekly policy updates
                                </label>
                            </div>
                            <div class="preference-item">
                                <label>
                                    <input type="checkbox">
                                    Daily activity summaries
                                </label>
                            </div>
                            <div class="preference-item">
                                <label>
                                    <input type="checkbox" checked>
                                    System maintenance alerts
                                </label>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveUserPreferences()">
                            Save Preferences
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Password</h3>
                <span class="close" onclick="closeChangePasswordModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm" onsubmit="changeUserPassword(event)">
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <input type="password" id="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" required minlength="8">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" id="confirmPassword" required minlength="8">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeChangePasswordModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Change Password</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>CSI Policy Manager</span>
                </div>
                <p>&copy; 2024 CSI Policy Manager. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
